<div ng-include="'partials/navbar'"></div>
<div ng-show="mode === 0">
    <div class="poll-new" ng-hide="poll">
        <h2>Create a New Poll</h2>
        <label>Title</label>
        <input ng-model="pollNew.title" />
        <button class="btn btn-info" ng-click="startNewPoll()">Start</button>
    </div>

    <div class="poll-existing" ng-show="poll">
        <h2>Active Poll</h2>
        <h3>{{ poll.title }}</h3>
        <h4>Started: {{ poll.momentFromNow }}</h4>
        <h4>States:</h4>
        <div class="states">
            <span style="color: green;" ng-style="{opacity: states[1]}">{{ 100 * states[1] }}%</span>
            <span style="color: red;" ng-style="{opacity: states[2]}">{{ 100 * states[2] }}%</span>
        </div>
        <button class="btn btn-danger" ng-click="endPoll()">End</button>
    </div>  
</div>
<div ng-show="mode === 1">
    <table class="table table-striped">
        <tr ng-repeat="question in questions" ng-click="selectQuestion(question)">
            <td>{{ question.text }}</td>
            <td><button class="btn btn-small btn-info" ng-click="startAssessment(question)" ng-show="question.selected">Push</button></td>
        </tr>
    </table>
</div>
<div ng-show="mode === 2">
    <div ng-show="assessmentResults">
        <table class="table table-striped">
            <tr ng-repeat="answer in assessment.question.answers" ng-class="{correct: answer.correct}">
                <td>{{ answer.text }}</td>
                <td>{{ assessmentResults[answer.text].percent() || 0 }}%</td>
            </tr>
        </table>
    </div>
    <div ng-hide="assessmentResults">
        Waiting for Results...
    </div>
</div>
<div ng-show="mode === 3">
    <div ng-show="feedbackResults">
        <table class="table table-striped">
            <tr ng-repeat="result in feedbackResults">
                <td>{{ result.text }}</td>
            </tr>
        </table>
    </div>
    <div ng-hide="feedbackResults">
        Waiting for Results...
    </div>
    <button class="btn btn-danger" ng-click="endFeedback()">End</button>
</div>
<div class="row marketing">
    <button class="btn btn-large btn-info pull-left" ng-click="startQuestionMode()" ng-hide="mode !== 0">Assessment</button>
    <button class="btn btn-large btn-info center-block" ng-click="startFeedback()" ng-hide="mode !== 0">Feedback</button>
    <button class="btn btn-large btn-info pull-right" ng-click="returnToPolling()" ng-hide="mode === 0 || mode === 3">Return</button>
</div>
